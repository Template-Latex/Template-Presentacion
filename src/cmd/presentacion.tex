% Template:     Template Presentación LaTeX
% Documento:    Funciones del template
% Versión:      1.1.5 (23/06/2021)
% Codificación: UTF-8
%
% Autor: Pablo Pizarro R.
%        Facultad de Ciencias Físicas y Matemáticas
%        Universidad de Chile
%        pablo@ppizarror.com
%
% Sitio web:    [https://latex.ppizarror.com/presentacion]
% Licencia MIT: [https://opensource.org/licenses/MIT]

% Crea variables para guardar configuraciones del tabularframe
\global\def\GLOBALtabularframebarfontsize {\normalsize}
\global\def\GLOBALtabularframebarheight {0.05}
\global\def\GLOBALtabularframebartextcentered {true}
\global\def\GLOBALtabularframecontentheight {0.65}
\global\def\GLOBALtabularframecontentleftcentered {false}
\global\def\GLOBALtabularframecontentrightcentered {false}
\global\def\GLOBALtabularframecontentwidthleft {0.4}
\global\def\GLOBALtabularframecontentwidthright {0.6}
\global\def\GLOBALtabularframetfcontentlist {}

\def\GLOBALtabularframecolumnselected {1}
\def\GLOBALtabularinit {false}

% Librerías especiales
% \usepackage{pgffor}
% \usepackage{xstring}

% Define contadores
\newcounter{tabularcolnumber}
\setcounter{tabularcolnumber}{0}

% Obtiene el enésimo elemento de una lista
%	#1	La lista de elementos
%	#2	El número de elemento a recoger
% \newcommand*\coregetelementlist[2]{\StrBetween[#2,\number\numexpr#2+1]{,#1,},,}

% Función que configra el texto de la barra superior del tabularframe
% 	#1 Tamaño de letra
%	#2 Texto centrado
\newcommand{\tabularframebartextcfg}[2]{
	\emptyvarerr{\tabularframebartextcfg}{#1}{Tamano fuente no definida}
	\emptyvarerr{\tabularframebartextcfg}{#2}{Texto centrado no definido}
	\corecheckbooleanvar{#2}
	\global\def\GLOBALtabularframebarfontsize {#1}
	\global\def\GLOBALtabularframebartextcentered {#2}
}

% Función que configura el entorno tabular frames
%	#1	Altura de head en porcentaje (0-1)
%	#2	Altura de content en porcentaje (0-1)
%	#3	Ancho de la barra izquierda de contenidos (coloreada)
%	#4	Ancho de la barra derecha de contenidos
\newcommand{\tabularframecfg}[4]{
	\emptyvarerr{\tabularframecfg}{#1}{Altura de head no definido}
	\emptyvarerr{\tabularframecfg}{#2}{Altura de content no definido}
	\emptyvarerr{\tabularframecfg}{#3}{Ancho de la barra izquierda de contenidos}
	\emptyvarerr{\tabularframecfg}{#4}{Ancho de la barra derecha de contenidos}
	\global\def\GLOBALtabularframebarheight {#1}
	\global\def\GLOBALtabularframecontentheight {#2}
	\global\def\GLOBALtabularframecontentwidthleft {#3}
	\global\def\GLOBALtabularframecontentwidthright {#4}
}

% Función que configura la alineación del entorno tabular frames
%	#1	Columna izquierda contenidos centrada (true/false)
%	#2	Columna derecha contenidos centrada (true/false)
\newcommand{\tabularframecfgalign}[2]{
	\emptyvarerr{\tabularframecfgalign}{#1}{Centrado columna izquierda no definido}
	\emptyvarerr{\tabularframecfgalign}{#2}{Centrado columna derecha no definido}
	\corecheckbooleanvar{#1}
	\corecheckbooleanvar{#2}
	\global\def\GLOBALtabularframecontentleftcentered {#1}
	\global\def\GLOBALtabularframecontentrightcentered {#2}
}

% Entorno que configura el entorno tabular frames
%	#1	Número de la columna destacada (desde 1)
\newenvironment{tabularframehead}[1]{%
	\emptyvarerr{\tabularframehead}{#1}{Numero de columna destacada no definido}
	\def\GLOBALtabularframecolumnselected {#1}
	\def\GLOBALtabularinit {true}
	% \global\def\GLOBALtabularframetfcontentlist {}
	\setcounter{tabularcolnumber}{0}%
	\vspace{\dimexpr-\GLOBALtabularframebarheight\textheight-0.5\footheight}
	\begin{columns}[t,onlytextwidth]%
	}{
	\end{columns}
	\setcounter{tabularcolnumber}{-1}
}

% Función que repite el último entorno tabular frames
%	#1	Número de la columna destacada (desde 1)
% \newcommand{\tabularframeheadrepeatlast}[1]{
% 	\emptyvarerr{\tabularframeheadrepeatlast}{#1}{Numero de columna destacada no definido}
% 	\edef\GLOBALtabularframetfcontentlistlast {\GLOBALtabularframetfcontentlist}
% 	\begin{tabularframehead}{#1}%
% 		\foreach \x in \GLOBALtabularframetfcontentlistlast {%
% 			\ifthenelse{\equal{\x}{}}{}{%
% 				\addtfheadcolumn{\coregetelementlist{\x}{1}}{\coregetelementlist{\x}{2}}
% 			}%
% 		}%
% 	\end{tabularframehead}%
% }

% Agrega una columna al tabular head
%	#1	Tamaño de la columna
%	#2	Texto
\newcommand{\addtfheadcolumn}[2]{%
	\ifthenelse{\equal{\GLOBALtabularinit}{true}}{}{%
		\throwwarning{Funcion \noexpand\addtfheadcolumn no puede usarse fuera del entorno \noexpand\tabularframehead}\stop}%
	\emptyvarerr{\addtfheadcolumn}{#1}{Tamano de la columna no definido}%
	\emptyvarerr{\addtfheadcolumn}{#2}{Texto de la columna no definido}%
	\stepcounter{tabularcolnumber}%
	% \global\edef\GLOBALtabularframetfcontentlist {{#1,#2}, \GLOBALtabularframetfcontentlist}%
	\column{\dimexpr#1\linewidth}%
	\ifthenelse{\equal{\thetabularcolnumber}{\GLOBALtabularframecolumnselected}}{%
		\transparent{1.0}%
	}{%
		\transparent{\opacitytabularframe}%
	}
	\usebeamercolor[fg]{frametitle}\colorbox{bg}{\begin{minipage}[t][\GLOBALtabularframebarheight\textheight][t]{\dimexpr\linewidth-15\fboxrule}%
		\usebeamercolor[fg]{frametitle}{%
			\ifthenelse{\equal{\GLOBALtabularframebartextcentered}{false}}{%
				\verticallycentertext{\GLOBALtabularframebarfontsize{#2}}%
			}{%
				\begin{center}%
					\verticallycentertext{\GLOBALtabularframebarfontsize{#2}}%
				\end{center}%
			}%
		}%
	\end{minipage}}%
}

% Inicia el contenido de un tabular frame
%	#1	Panel izquierdo
%	#2	Panel derecho
\newcommand{\tabularframecontent}[2]{%
	\ifthenelse{\equal{\thetabularcolnumber}{-1}}{}{%
		\throwwarning{Funcion \noexpand\addtfheadcolumn no puede usarse fuera del entorno \noexpand\tabularframehead}\stop}%
	\emptyvarerr{\tabularframecontent}{#1}{Columna izquierda no definida}%
	\emptyvarerr{\tabularframecontent}{#2}{Columna derecha no definida}%
	\vspace{-2.5\fboxrule}
	\begin{columns}[t,onlytextwidth]%
		\column{\GLOBALtabularframecontentwidthleft\linewidth}%
		\usebeamercolor[fg]{block body}\colorbox{bg}{\begin{minipage}[t][\GLOBALtabularframecontentheight \textheight][t]{\dimexpr\textwidth-15\fboxrule}%
			\ifthenelse{\equal{\GLOBALtabularframecontentleftcentered}{false}}{%
				#1%
			}{%
				\verticallycentertext{#1}%
			}
		\end{minipage}}%
		\column{\GLOBALtabularframecontentwidthright\linewidth}%
		\centering
		{\begin{minipage}[t][\GLOBALtabularframecontentheight \textheight][t]{\dimexpr\textwidth-10\fboxrule}%
			\ifthenelse{\equal{\GLOBALtabularframecontentrightcentered}{false}}{%
				\vspace{-10\fboxrule}%
				#2%
			}{%
				\vspace{-0.5\baselineskip}
				\verticallycentertext{#2}%
			}
		\end{minipage}}%
	\end{columns}%
	\def\GLOBALtabularinit {false}%
}
